(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5469:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(5824)}])},1361:function(e,n,t){"use strict";t.r(n);var r=t(4051),a=t.n(r),o=t(5893),i=t(7294),s=t(1163),c=t(9824),l=t(6811),u=t(3712),d=t(3646),m=t(1489),p=t(2073),h=t(8312),g=t(1898),f=t(7041);function x(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void t(l)}s.done?n(c):Promise.resolve(c).then(r,a)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){x(o,r,a,i,s,"next",e)}function s(e){x(o,r,a,i,s,"throw",e)}i(void 0)}))}}function j(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){j(e,n,t[n])}))}return e}n.default=function(){var e=(0,s.useRouter)(),n=(0,i.useState)({lunes:!1,martes:!1,miercoles:!1,jueves:!1,viernes:!1,sabado:!1,domingo:!1}),t=n[0],r=n[1],x=(0,i.useState)({origen:"",destino:"",costoViaje:"",limitePasajeros:"",horaSalida:""}),y=x[0],Z=x[1],k=function(){var e=b(a().mark((function e(n){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,y.origen===y.destino){e.next=20;break}if(!(y.limitePasajeros<=40)){e.next=17;break}if(t.lunes||t.martes||t.miercoles||t.jueves||t.viernes||t.sabado||t.domingo){e.next=8;break}c.Z.danger("Debe seleccionar 1 d\xeda m\xednimo"),e.next=15;break;case 8:return e.next=10,fetch("api/admin",{body:JSON.stringify({info:y,semana:t}),headers:{"Content-Type":"application/json"},method:"POST"});case 10:return r=e.sent,e.next=13,r.json();case 13:500===(o=e.sent).code?c.Z.danger(o.message):200==o.code&&c.Z.success(o.message);case 15:e.next=18;break;case 17:c.Z.danger("El l\xedmite de pasaeros debe ser 40 o menos");case 18:e.next=21;break;case 20:c.Z.danger("Origen y Destino deben ser diferentes");case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1),c.Z.danger(e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=b(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(v({},t,j({},n.target.name,n.target.checked)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(){var e=b(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(v({},y,j({},n.target.name,n.target.value)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){(0,f.getCookie)("token")||e.push("/login")})),(0,o.jsx)(l.Z,{width:"100%",height:"100vh",border:"default",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",children:(0,o.jsx)("form",{onSubmit:k,children:(0,o.jsxs)(u.Z,{elevation:1,height:"100%",width:"100%",border:"default",padding:30,display:"flex",flexDirection:"column",alignItems:"center",children:[(0,o.jsx)(d.Z,{size:600,marginTop:10,children:"Nuevo Viaje"}),(0,o.jsx)(m.Z,{name:"origen",placeholder:"Origen",type:"text",maxLength:"15",onChange:C,marginTop:40,title:"Solo l\xe9tras",required:!0,pattern:"[a-zA-Z\\s]{1,15}"}),(0,o.jsx)(m.Z,{name:"destino",placeholder:"Destino",type:"text",maxLength:"15",onChange:C,marginTop:10,pattern:"[a-zA-Z\\s]{1,15}",title:"Solo l\xe9tras",required:!0}),(0,o.jsx)(m.Z,{name:"costoViaje",placeholder:"Costo pasaje",type:"text",marginTop:10,pattern:"[0-9]{1,4}",onChange:C,title:"Solo n\xfameros",required:!0}),(0,o.jsx)(m.Z,{name:"limitePasajeros",placeholder:"Limite pasajeros",type:"text",marginTop:10,pattern:"[0-9]{1,2}",onChange:C,required:!0,title:"Solo n\xfameros"}),(0,o.jsx)(m.Z,{name:"horaSalida",placeholder:"Hora salida",type:"text",marginTop:10,pattern:"[0-9]{1,4}",onChange:C,required:!0,title:"Solo n\xfameros"}),(0,o.jsxs)(p.Z,{label:"Seleccione un d\xeda:",marginTop:20,children:[(0,o.jsxs)(l.Z,{display:"flex",children:[(0,o.jsx)(h.Z,{name:"lunes",label:"Lunes",checked:t.lunes,onChange:w,marginRight:5}),(0,o.jsx)(h.Z,{name:"martes",label:"Martes",checked:t.martes,onChange:w,marginRight:5}),(0,o.jsx)(h.Z,{name:"miercoles",label:"Miercoles",checked:t.miercoles,onChange:w,marginRight:5}),(0,o.jsx)(h.Z,{name:"jueves",label:"Jueves",checked:t.jueves,onChange:w,marginRight:5}),(0,o.jsx)(h.Z,{name:"viernes",label:"Viernes",checked:t.viernes,onChange:w})]}),(0,o.jsxs)(l.Z,{display:"flex",children:[(0,o.jsx)(h.Z,{name:"sabado",label:"Sabado",checked:t.sabado,onChange:w,marginRight:5}),(0,o.jsx)(h.Z,{name:"domingo",label:"Domingo",checked:t.domingo,onChange:w})]})]}),(0,o.jsx)(g.ZP,{appearance:"primary",display:"flex",marginTop:10,type:"submit",children:"Crear"})]})})})}},5824:function(e,n,t){"use strict";t.r(n);var r=t(1361);n.default=r.default}},function(e){e.O(0,[655,898,385,582,365,824,332,862,774,888,179],(function(){return n=5469,e(e.s=n);var n}));var n=e.O();_N_E=n}]);