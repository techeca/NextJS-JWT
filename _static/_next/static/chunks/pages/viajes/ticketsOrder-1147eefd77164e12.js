(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{6489:function(e,n){"use strict";n.parse=function(e,n){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var t={},i=n||{},s=e.split(";"),a=i.decode||r,c=0;c<s.length;c++){var l=s[c],d=l.indexOf("=");if(!(d<0)){var u=l.substring(0,d).trim();if(void 0==t[u]){var f=l.substring(d+1,l.length).trim();'"'===f[0]&&(f=f.slice(1,-1)),t[u]=o(f,a)}}}return t},n.serialize=function(e,n,r){var o=r||{},s=o.encode||t;if("function"!==typeof s)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var a=s(n);if(a&&!i.test(a))throw new TypeError("argument val is invalid");var c=e+"="+a;if(null!=o.maxAge){var l=o.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(l)}if(o.domain){if(!i.test(o.domain))throw new TypeError("option domain is invalid");c+="; Domain="+o.domain}if(o.path){if(!i.test(o.path))throw new TypeError("option path is invalid");c+="; Path="+o.path}if(o.expires){if("function"!==typeof o.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+o.expires.toUTCString()}o.httpOnly&&(c+="; HttpOnly");o.secure&&(c+="; Secure");if(o.sameSite){switch("string"===typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var r=decodeURIComponent,t=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e,n){try{return n(e)}catch(r){return e}}},7041:function(e,n,r){"use strict";var t=this&&this.__assign||function(){return t=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},t.apply(this,arguments)},i=this&&this.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(t=Object.getOwnPropertySymbols(e);i<t.length;i++)n.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(r[t[i]]=e[t[i]])}return r};Object.defineProperty(n,"__esModule",{value:!0}),n.checkCookies=n.removeCookies=n.setCookies=n.getCookie=n.getCookies=void 0;var o=r(6489),s=function(){return"undefined"!==typeof window},a=function(e){void 0===e&&(e="");try{var n=JSON.stringify(e);return/^[\{\[]/.test(n)?n:e}catch(r){return e}};n.getCookies=function(e){var n;if(e&&(n=e.req),!s())return n&&n.cookies?n.cookies:n&&n.headers&&n.headers.cookie?(0,o.parse)(n.headers.cookie):{};for(var r={},t=document.cookie?document.cookie.split("; "):[],i=0;i<t.length;i++){var a=t[i].split("="),c=a.slice(1).join("=");r[a[0]]=c}return r};n.getCookie=function(e,r){var t,i,o=(0,n.getCookies)(r);return i=o[e],"true"===(t=i?i.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):i)||"false"!==t&&("undefined"!==t?"null"===t?null:t:void 0)};n.setCookies=function(e,n,r){var c,l,d;r&&(l=r.req,d=r.res,c=i(r,["req","res"]));var u=(0,o.serialize)(e,a(n),t({path:"/"},c));if(s())document.cookie=u;else if(d&&l){var f=d.getHeader("Set-Cookie");if(d.setHeader("Set-Cookie",f?f.concat(u):[u]),l&&l.cookies){var h=l.cookies;""===n?delete h[e]:h[e]=a(n)}if(l&&l.headers&&l.headers.cookie){h=(0,o.parse)(l.headers.cookie);""===n?delete h[e]:h[e]=a(n),l.headers.cookie=Object.entries(h).reduce((function(e,n){return e.concat(n[0]+"="+n[1]+";")}),"")}}};n.removeCookies=function(e,r){return(0,n.setCookies)(e,"",t(t({},r),{maxAge:-1}))};n.checkCookies=function(e,r){return!!e&&(0,n.getCookies)(r).hasOwnProperty(e)}},7954:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/viajes/ticketsOrder",function(){return r(1843)}])},499:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return s}});var t=r(5893),i=r(6811),o=r(1383);function s(){return(0,t.jsx)(i.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:400,children:(0,t.jsx)(o.Z,{})})}},1843:function(e,n,r){"use strict";r.r(n);var t=r(4051),i=r.n(t),o=r(5893),s=r(3712),a=r(3646),c=r(4693),l=r(2073),d=r(6811),u=r(1489),f=r(5529),h=r(9824),x=r(2636),m=r(8999),p=r(1898),g=r(7294),j=(r(499),r(7041));function v(e,n,r,t,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}function y(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function s(e){v(o,t,i,s,a,"next",e)}function a(e){v(o,t,i,s,a,"throw",e)}s(void 0)}))}}function Z(e){if(e){var n=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(n))}}n.default=function(e){var n=function(){return parseInt(C)},r=function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(s.Z,{elevation:1,height:500,width:"60vh",border:"default",padding:30,display:"flex",flexDirection:"column",alignItems:"center",children:[(0,o.jsx)(a.Z,{size:600,marginBottom:10,children:"Carrito de Pasajes"}),(0,o.jsx)(c.Z,{color:"muted",children:"No hay pasajes"})]})})},t=function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(s.Z,{elevation:0,margin:10,border:"default",display:"flex",flexDirection:"column",justifyContent:"flex-start",children:(0,o.jsx)(l.Z,{label:"Datos Personales",margin:20,children:(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,o.jsx)(u.Z,{margin:10,placeholder:"Nombres"}),(0,o.jsx)(u.Z,{margin:10,placeholder:"Apellidos"}),(0,o.jsx)(u.Z,{margin:10,placeholder:"Email"}),(0,o.jsx)(u.Z,{margin:10,placeholder:"Telefono"}),(0,o.jsx)(u.Z,{margin:10,placeholder:"Direcci\xf3n"}),(0,o.jsx)(u.Z,{margin:10,placeholder:"RUT"})]})})})})},v=function(){var e=Z((0,j.getCookie)("token"));return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(s.Z,{elevation:0,margin:10,border:"default",display:"flex",flexDirection:"column",justifyContent:"flex-start",children:(0,o.jsx)(l.Z,{label:"Datos Personales",margin:20,children:(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(c.Z,{margin:10,children:"Nombre:"}),(0,o.jsx)(c.Z,{margin:10,children:e.name})]}),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(c.Z,{margin:10,children:"Apellidos:"}),(0,o.jsx)(c.Z,{margin:10,children:e.lastName})]}),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(c.Z,{margin:10,children:"Email:"}),(0,o.jsx)(c.Z,{margin:10,children:e.email})]}),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(c.Z,{margin:10,children:"Telefono:"}),(0,o.jsx)(c.Z,{margin:10,children:e.phone})]}),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(c.Z,{margin:10,children:"Direcci\xf3n:"}),(0,o.jsx)(c.Z,{margin:10,children:e.name})]}),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(c.Z,{margin:10,children:"RUT:"}),(0,o.jsx)(c.Z,{margin:10,children:e.rut})]})]})})})})},k=0,w=(0,g.useState)(0),C=w[0],b=(w[1],(0,g.useState)([])),S=b[0],O=b[1],T=(0,g.useState)(1),D=(T[0],T[1],(0,g.useState)(!1)),E=D[0],_=D[1],P=(0,g.useState)(!1),A=P[0],I=P[1],N=(0,g.useState)(""),U=N[0],F=N[1],R=(0,g.useState)(!1),z=(R[0],R[1],function(){var e=y(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"undefined"!==userTO&&F(Z(token))}catch(n){h.Z.danger(n.message)}finally{_(!1)}case 1:case"end":return e.stop()}}),e)})))}(),function(){var n=y(i().mark((function n(r){var t,o,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("api/tickets",{body:JSON.stringify({idUser:U,carrito:S}),headers:{"Content-Type":"application/json"},method:"POST"});case 3:return t=n.sent,n.next=6,t.json();case 6:500===(o=n.sent).code?h.Z.danger(o.message):o.code,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),h.Z.danger(n.t0.message);case 13:return n.prev=13,I(!1),s=[],e.rmvElmt(s),n.finish(13);case 18:case"end":return n.stop()}}),n,null,[[0,10,13,18]])})));return function(e){return n.apply(this,arguments)}}());return(0,g.useEffect)((function(){var n=(0,j.getCookie)("token");n?(console.log("chao"),F(Z(n).idUser)):F(0),O(e.carrito)}),[e.carrito]),(0,o.jsxs)(o.Fragment,{children:[E?(0,o.jsx)(r,{}):(0,o.jsxs)(s.Z,{elevation:1,height:500,width:"60vh",border:"default",padding:30,display:"flex",flexDirection:"column",alignItems:"center",children:[(0,o.jsx)(a.Z,{size:600,marginBottom:10,children:"Carrito de Pasajes"}),S.map((function(n){return(0,o.jsxs)(d.Z,{border:"default",background:"tint2",padding:10,marginTop:10,width:"100%",display:"flex",justifyContent:"space-around",children:[(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"column",children:[(0,o.jsx)(a.Z,{color:"muted",children:"N\xba Asiento"}),(0,o.jsx)(c.Z,{textAlign:"center",color:"muted",children:n.nroAsiento})]}),(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(a.Z,{color:"muted",children:"Trayectoria"}),(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"row",justifyContent:"space-around",children:[(0,o.jsx)(c.Z,{textAlign:"center",color:"muted",children:n.info.origen}),(0,o.jsx)(c.Z,{textAlign:"center",color:"muted",children:"-"}),(0,o.jsx)(c.Z,{textAlign:"center",color:"muted",children:n.info.destino})]})]}),(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"column",children:[(0,o.jsx)(a.Z,{color:"muted",children:"Hora"}),(0,o.jsx)(c.Z,{textAlign:"center",color:"muted",children:n.info.horaSalida})]}),(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(a.Z,{color:"muted",children:"Fecha"}),(0,o.jsx)(c.Z,{textAlign:"center",color:"muted",children:n.fecha})]}),(0,o.jsx)(d.Z,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:(0,o.jsx)(x.Z,{icon:m.X,onClick:function(){return function(n,r){e.carrito.indexOf(r);var t=S.filter((function(e){return e.code!==r.code}));O(t),e.rmvElmt(t)}(0,n)},intent:"danger"})})]},k+=1)})),(0,o.jsx)(d.Z,{display:"flex",flexDirection:"column",width:"90%",height:"100%",justifyContent:"flex-end",children:(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(a.Z,{children:"Total:"}),(0,o.jsxs)(c.Z,{children:[" $",n()]})]}),(0,o.jsx)(p.ZP,{appearance:"primary",onClick:function(){return I(!0)},type:"submit",children:"Ir a pagar"})]})})]}),(0,o.jsx)(d.Z,{children:(0,o.jsx)(f.Z,{isShown:A,title:"Resumen",onCloseComplete:function(){return I(!1)},preventBodyScrolling:!0,onConfirm:function(){return z()},confirmLabel:"Comprar",children:(0,o.jsxs)(d.Z,{display:"flex",flexDirection:"column",children:[0===U?(0,o.jsx)(t,{}):(0,o.jsx)(v,{}),(0,o.jsx)(c.Z,{}),(0,o.jsx)(s.Z,{elevation:0,margin:10,border:"default",display:"flex",flexDirection:"column",alignItems:"flex-end",children:(0,o.jsx)(l.Z,{label:"Costo Total",margin:20,children:(0,o.jsx)(d.Z,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:(0,o.jsxs)(c.Z,{children:["$",n()]})})})})]})})})]})}}},function(e){e.O(0,[655,898,385,582,365,824,247,332,202,774,888,179],(function(){return n=7954,e(e.s=n);var n}));var n=e.O();_N_E=n}]);